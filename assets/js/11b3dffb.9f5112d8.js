"use strict";(self.webpackChunkexpenses_docs=self.webpackChunkexpenses_docs||[]).push([[9070],{1231:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"HLD/2.2 Microservices/Budgets MS PRD","title":"Budgets MS PRD","description":"\ud83d\udccc Non-Functional Requirements & Best Practices for .NET Microservices","source":"@site/docs/2. HLD/2.2 Microservices/Budgets MS PRD.md","sourceDirName":"2. HLD/2.2 Microservices","slug":"/HLD/2.2 Microservices/Budgets MS PRD","permalink":"/expenses-docs/docs/HLD/2.2 Microservices/Budgets MS PRD","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/2. HLD/2.2 Microservices/Budgets MS PRD.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"AccountsMS PRD","permalink":"/expenses-docs/docs/HLD/2.2 Microservices/AccountsMS PRD"},"next":{"title":"Expenses MS PRD","permalink":"/expenses-docs/docs/HLD/2.2 Microservices/Expenses MS PRD"}}');var i=r(4848),t=r(8453);const l={},d=void 0,c={},o=[{value:"<strong>\ud83d\udccc Non-Functional Requirements &amp; Best Practices for .NET Microservices</strong>",id:"-non-functional-requirements--best-practices-for-net-microservices",level:3},{value:"<strong>\ud83d\udee0 1\ufe0f\u20e3 Architecture &amp; Design Principles</strong>",id:"-1\ufe0f\u20e3-architecture--design-principles",level:2},{value:"<strong>\ud83d\udd39 2\ufe0f\u20e3 API Design &amp; Communication</strong>",id:"-2\ufe0f\u20e3-api-design--communication",level:2},{value:"<strong>\ud83d\udee1 3\ufe0f\u20e3 Security &amp; Authentication</strong>",id:"-3\ufe0f\u20e3-security--authentication",level:2},{value:"<strong>\ud83d\udcbe 4\ufe0f\u20e3 Data Management &amp; Storage</strong>",id:"-4\ufe0f\u20e3-data-management--storage",level:2},{value:"<strong>\ud83d\udccc 5\ufe0f\u20e3 Resilience &amp; Fault Tolerance</strong>",id:"-5\ufe0f\u20e3-resilience--fault-tolerance",level:2},{value:"<strong>\ud83d\ude80 6\ufe0f\u20e3 Performance Optimization</strong>",id:"-6\ufe0f\u20e3-performance-optimization",level:2},{value:"<strong>\ud83d\udee0 7\ufe0f\u20e3 Observability &amp; Logging</strong>",id:"-7\ufe0f\u20e3-observability--logging",level:2},{value:"<strong>\u26a1 8\ufe0f\u20e3 Deployment &amp; DevOps Best Practices</strong>",id:"-8\ufe0f\u20e3-deployment--devops-best-practices",level:2},{value:"<strong>\u2699 9\ufe0f\u20e3 Feature Flagging &amp; Externalization</strong>",id:"-9\ufe0f\u20e3-feature-flagging--externalization",level:2},{value:"<strong>\ud83d\udd25 Conclusion</strong>",id:"-conclusion",level:3},{value:"\ud83d\udccc 1. Overview",id:"-1-overview",level:2},{value:"\ud83e\udded 2. Key Responsibilities",id:"-2-key-responsibilities",level:2},{value:"\ud83d\udd0c 3. API Endpoints",id:"-3-api-endpoints",level:2},{value:"\ud83d\udd39 REST APIs (Main Interface)",id:"-rest-apis-main-interface",level:3},{value:"\ud83d\udfe3 Kafka Consumer",id:"-kafka-consumer",level:3},{value:"\ud83e\udde9 GraphQL (Optional)",id:"-graphql-optional",level:3},{value:"\ud83e\uddf1 4. Database Schema (PostgreSQL)",id:"-4-database-schema-postgresql",level:2},{value:"Table: <code>budgets</code>",id:"table-budgets",level:3},{value:"Table: <code>budget_events</code> (Optional)",id:"table-budget_events-optional",level:3},{value:"\ud83d\udd04 5. Interactions with Other Services",id:"-5-interactions-with-other-services",level:2},{value:"\ud83e\uddf0 6. Tech Stack",id:"-6-tech-stack",level:2},{value:"\u2705 Language &amp; Framework",id:"-language--framework",level:3},{value:"\u2705 Infra &amp; DevOps",id:"-infra--devops",level:3},{value:"\u2705 Observability",id:"-observability",level:3},{value:"\u2705 Code Quality",id:"-code-quality",level:3},{value:"\ud83e\uddf1 7. Architecture",id:"-7-architecture",level:2},{value:"Recommended: <strong>Hexagonal Architecture (Ports &amp; Adapters)</strong>",id:"recommended-hexagonal-architecture-ports--adapters",level:3},{value:"\ud83d\udd10 8. Security",id:"-8-security",level:2},{value:"\ud83e\uddea 9. Testing Strategy",id:"-9-testing-strategy",level:2},{value:"\ud83d\udc8e 10. Best Practices (Enterprise .NET Microservices)",id:"-10-best-practices-enterprise-net-microservices",level:2},{value:"\u2705 1. Auto-Generated <strong>OpenAPI (Swagger) YAML</strong>",id:"-1-auto-generated-openapi-swagger-yaml",level:2},{value:"\u2705 2. GitHub-Ready Starter Template Structure",id:"-2-github-ready-starter-template-structure",level:2},{value:"\u2705 3. <code>Dockerfile</code> and <code>Kubernetes Manifests</code>",id:"-3-dockerfile-and-kubernetes-manifests",level:2},{value:"\ud83d\udce6 <code>Dockerfile</code>",id:"-dockerfile",level:3},{value:"\u2699\ufe0f <code>budgets.k8s.yaml</code>",id:"\ufe0f-budgetsk8syaml",level:3}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"-non-functional-requirements--best-practices-for-net-microservices",children:(0,i.jsx)(n.strong,{children:"\ud83d\udccc Non-Functional Requirements & Best Practices for .NET Microservices"})}),"\n",(0,i.jsxs)(n.p,{children:["Here\u2019s a ",(0,i.jsx)(n.strong,{children:"comprehensive list"})," of ",(0,i.jsx)(n.strong,{children:"non-functional requirements (NFRs)"})," and ",(0,i.jsx)(n.strong,{children:"best practices"})," for developing robust, scalable, and maintainable ",(0,i.jsx)(n.strong,{children:"C# .NET-based microservices"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-1\ufe0f\u20e3-architecture--design-principles",children:(0,i.jsx)(n.strong,{children:"\ud83d\udee0 1\ufe0f\u20e3 Architecture & Design Principles"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Microservices Principles"})," \u2013 Each microservice should have a ",(0,i.jsx)(n.strong,{children:"single responsibility"}),", be loosely coupled, and independently deployable.\r\n\u2714 ",(0,i.jsx)(n.strong,{children:"Domain-Driven Design (DDD)"})," \u2013 Define clear ",(0,i.jsx)(n.strong,{children:"bounded contexts"})," and separate ",(0,i.jsx)(n.strong,{children:"aggregates"}),".\r\n\u2714 ",(0,i.jsx)(n.strong,{children:"Event-Driven Architecture"})," \u2013 Use ",(0,i.jsx)(n.strong,{children:"Kafka, RabbitMQ, or Azure Service Bus"})," for asynchronous communication.\r\n\u2714 ",(0,i.jsx)(n.strong,{children:"Hexagonal / Clean Architecture"})," \u2013 Keep business logic ",(0,i.jsx)(n.strong,{children:"separated"})," from infrastructure concerns.\r\n\u2714 ",(0,i.jsx)(n.strong,{children:"CQRS (Command Query Responsibility Segregation)"})," \u2013 Separate read and write models for performance optimization."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-2\ufe0f\u20e3-api-design--communication",children:(0,i.jsx)(n.strong,{children:"\ud83d\udd39 2\ufe0f\u20e3 API Design & Communication"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Use REST, GraphQL, and gRPC where appropriate"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"REST"})," for general APIs."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"GraphQL"})," for flexible querying."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"gRPC"})," for high-performance internal service communication."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Versioning"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Support API versioning using ",(0,i.jsxs)(n.strong,{children:["URL path (",(0,i.jsx)(n.code,{children:"/v1/accounts"}),")"]})," or ",(0,i.jsx)(n.strong,{children:"headers"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Consistent Error Handling"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Follow structured ",(0,i.jsx)(n.strong,{children:"error response formats"})," (like ",(0,i.jsx)(n.code,{children:"correlationId"}),", ",(0,i.jsx)(n.code,{children:"statusCode"}),", etc.)."]}),"\n",(0,i.jsxs)(n.li,{children:["Implement global ",(0,i.jsx)(n.strong,{children:"exception handling"})," using ",(0,i.jsx)(n.code,{children:".NET Middleware"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Pagination & Filtering"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"skip"})," & ",(0,i.jsx)(n.code,{children:"limit"})," for pagination."]}),"\n",(0,i.jsxs)(n.li,{children:["Support filtering via query parameters (",(0,i.jsx)(n.code,{children:"/accounts?status=OPEN&currency=USD"}),")."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Rate Limiting & Throttling"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"AspNetCoreRateLimit"})," to prevent API abuse."]}),"\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.strong,{children:"JWT-based user quota restrictions"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Idempotency for Critical Operations"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Idempotency Keys"})," in headers for ",(0,i.jsx)(n.strong,{children:"POST"})," operations."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-3\ufe0f\u20e3-security--authentication",children:(0,i.jsx)(n.strong,{children:"\ud83d\udee1 3\ufe0f\u20e3 Security & Authentication"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"OAuth 2.0 & OpenID Connect"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"IdentityServer4, Keycloak, or Azure AD"})," for authentication."]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"JWT (JSON Web Tokens)"})," for stateless authentication."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Role-Based & Attribute-Based Access Control (RBAC & ABAC)"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enforce ",(0,i.jsx)(n.strong,{children:"user roles and permissions"})," using policies in ",(0,i.jsx)(n.code,{children:".NET"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Secure API Communication"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"HTTPS"})," with TLS 1.2/1.3."]}),"\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.strong,{children:"HMAC authentication"})," for internal services."]}),"\n",(0,i.jsxs)(n.li,{children:["Enable ",(0,i.jsx)(n.strong,{children:"CORS policies"})," for web clients."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Data Protection & Compliance"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Encrypt sensitive data"})," (AES-256 for database, TLS for in-transit)."]}),"\n",(0,i.jsxs)(n.li,{children:["Ensure ",(0,i.jsx)(n.strong,{children:"GDPR, PCI-DSS, or HIPAA compliance"})," if required."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-4\ufe0f\u20e3-data-management--storage",children:(0,i.jsx)(n.strong,{children:"\ud83d\udcbe 4\ufe0f\u20e3 Data Management & Storage"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Database Selection & Scalability"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"PostgreSQL / SQL Server"})," for transactional data."]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"MongoDB / Redis"})," for caching and NoSQL storage."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Schema Evolution & Migrations"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Flyway or EF Core Migrations"})," for schema changes."]}),"\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.strong,{children:"backward-compatible database updates"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Event Sourcing for Auditability"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Kafka or EventStoreDB"})," for audit logs and financial transactions."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Data Partitioning & Sharding"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.strong,{children:"horizontal sharding"})," to improve scalability."]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"read replicas"})," for improved performance."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-5\ufe0f\u20e3-resilience--fault-tolerance",children:(0,i.jsx)(n.strong,{children:"\ud83d\udccc 5\ufe0f\u20e3 Resilience & Fault Tolerance"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Circuit Breaker Pattern"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Polly"})," to implement circuit breakers for external service calls."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Retry & Backoff Strategies"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.strong,{children:"exponential backoff"})," for transient failures."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Health Checks"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"AspNetCore.HealthChecks"})," to monitor microservice health."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Graceful Degradation (Feature Flags & Fallbacks)"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"LaunchDarkly or Azure App Configuration"})," for ",(0,i.jsx)(n.strong,{children:"feature flagging"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Provide ",(0,i.jsx)(n.strong,{children:"fallback mechanisms"})," for degraded services."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Timeouts & Bulkheads"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Set ",(0,i.jsx)(n.strong,{children:"timeouts"})," for HTTP calls."]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"bulkhead isolation"})," to prevent failures from cascading."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-6\ufe0f\u20e3-performance-optimization",children:(0,i.jsx)(n.strong,{children:"\ud83d\ude80 6\ufe0f\u20e3 Performance Optimization"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Async Processing"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Background Services & Hosted Services"})," for background tasks."]}),"\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.strong,{children:"Kafka / RabbitMQ consumers"})," for async events."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Caching Strategies"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Redis or MemoryCache"})," for frequently accessed data."]}),"\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.strong,{children:"cache invalidation policies"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Database Query Optimization"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"indexes and partitioning"})," for large datasets."]}),"\n",(0,i.jsxs)(n.li,{children:["Optimize queries with ",(0,i.jsx)(n.strong,{children:"EF Core tracking settings"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Content Delivery Optimization"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"CDN for static content"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.strong,{children:"Gzip & Brotli compression"})," for API responses."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-7\ufe0f\u20e3-observability--logging",children:(0,i.jsx)(n.strong,{children:"\ud83d\udee0 7\ufe0f\u20e3 Observability & Logging"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Structured Logging"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Serilog, NLog, or Application Insights"})," for centralized logging."]}),"\n",(0,i.jsxs)(n.li,{children:["Correlate logs using ",(0,i.jsx)(n.strong,{children:"requestId / correlationId"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Distributed Tracing"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"OpenTelemetry or Jaeger"})," to trace requests across microservices."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Metrics & Monitoring"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Prometheus & Grafana"})," for system health metrics."]}),"\n",(0,i.jsxs)(n.li,{children:["Monitor ",(0,i.jsx)(n.strong,{children:"CPU, memory, DB connections, and API response times"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Alerting & Incident Management"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"PagerDuty, Prometheus Alerts, or Azure Monitor"})," for alerts."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-8\ufe0f\u20e3-deployment--devops-best-practices",children:(0,i.jsx)(n.strong,{children:"\u26a1 8\ufe0f\u20e3 Deployment & DevOps Best Practices"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Containerization"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Docker & Kubernetes"})," for container orchestration."]}),"\n",(0,i.jsxs)(n.li,{children:["Ensure ",(0,i.jsx)(n.strong,{children:"multi-stage Docker builds"})," for optimized image size."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"CI/CD Pipelines"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"GitHub Actions, GitLab CI, or Azure DevOps"})," for automated builds."]}),"\n",(0,i.jsxs)(n.li,{children:["Enforce ",(0,i.jsx)(n.strong,{children:"branch policies & unit testing before merging"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Blue-Green Deployments & Canary Releases"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Argo Rollouts / Istio"})," for traffic-based deployments."]}),"\n",(0,i.jsxs)(n.li,{children:["Deploy new versions to ",(0,i.jsx)(n.strong,{children:"small subsets of users first"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Configuration Management"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Environment Variables"})," for secrets/configs."]}),"\n",(0,i.jsxs)(n.li,{children:["Store ",(0,i.jsx)(n.strong,{children:"configs in Consul / Azure App Config / Kubernetes ConfigMaps"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-9\ufe0f\u20e3-feature-flagging--externalization",children:(0,i.jsx)(n.strong,{children:"\u2699 9\ufe0f\u20e3 Feature Flagging & Externalization"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Feature Toggles for Safe Releases"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"LaunchDarkly / Unleash / Azure Feature Flags"})," to control features dynamically."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Externalized Configurations"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Store app configurations in ",(0,i.jsx)(n.strong,{children:"Azure App Configuration or HashiCorp Vault"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Avoid ",(0,i.jsx)(n.strong,{children:"hardcoding values in code"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 ",(0,i.jsx)(n.strong,{children:"Rolling Updates Without Downtime"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Deploy with ",(0,i.jsx)(n.strong,{children:"zero-downtime strategies"})," using Kubernetes rolling updates."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-conclusion",children:(0,i.jsx)(n.strong,{children:"\ud83d\udd25 Conclusion"})}),"\n",(0,i.jsxs)(n.p,{children:["By implementing these ",(0,i.jsx)(n.strong,{children:"non-functional requirements & best practices"}),", you can build ",(0,i.jsx)(n.strong,{children:"scalable, resilient, and maintainable"})," .NET microservices \ud83d\ude80."]}),"\n",(0,i.jsxs)(n.p,{children:["Would you like a ",(0,i.jsx)(n.strong,{children:"sample .NET microservice template"})," following these best practices? \ud83d\ude03"]}),"\n",(0,i.jsxs)(n.p,{children:["Here's a ",(0,i.jsx)(n.strong,{children:"complete Product Requirements Document (PRD)"})," for the ",(0,i.jsx)(n.strong,{children:"Budgets Microservice"})," in your microservices-based personal finance platform. This is structured for ",(0,i.jsx)(n.strong,{children:"enterprise-grade development"})," using ",(0,i.jsx)(n.strong,{children:".NET (C#)"})," with ",(0,i.jsx)(n.strong,{children:"best practices"}),", modern microservice architecture, observability, and integration."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h1,{id:"-product-requirements-document-prd-budgets-microservice",children:["\u2705 Product Requirements Document (PRD): ",(0,i.jsx)(n.strong,{children:"Budgets Microservice"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-1-overview",children:"\ud83d\udccc 1. Overview"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"Budgets Microservice"})," enables users to create, manage, and track ",(0,i.jsx)(n.strong,{children:"monthly or custom-period budgets"})," across categories (e.g., Food, Travel, EMI), accounts (e.g., Wallet, Bank), or tags (e.g., Personal, Work). It integrates with the ",(0,i.jsx)(n.strong,{children:"Expenses"})," and ",(0,i.jsx)(n.strong,{children:"Accounts"})," microservices to evaluate spending and assess budget limits in real-time."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-2-key-responsibilities",children:"\ud83e\udded 2. Key Responsibilities"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["CRUD operations for ",(0,i.jsx)(n.strong,{children:"budgets"})]}),"\n",(0,i.jsx)(n.li,{children:"Monitor expenses against budget"}),"\n",(0,i.jsx)(n.li,{children:"Notify overspending or goal nearing"}),"\n",(0,i.jsx)(n.li,{children:"Allow custom budget periods (monthly, weekly, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Support tagging, category, and account-based budgets"}),"\n",(0,i.jsx)(n.li,{children:"Serve aggregated insights via GraphQL (optional)"}),"\n",(0,i.jsx)(n.li,{children:"Kafka consumer for real-time budget updates"}),"\n",(0,i.jsx)(n.li,{children:"Secure via JWT"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-3-api-endpoints",children:"\ud83d\udd0c 3. API Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"-rest-apis-main-interface",children:"\ud83d\udd39 REST APIs (Main Interface)"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Method"}),(0,i.jsx)(n.th,{children:"Endpoint"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Auth"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"POST"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/budgets"})}),(0,i.jsx)(n.td,{children:"Create a new budget"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"GET"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/budgets/user/{userId}"})}),(0,i.jsx)(n.td,{children:"Get all budgets for a user (paginated)"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"GET"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/budgets/{budgetId}"})}),(0,i.jsx)(n.td,{children:"Get budget by ID"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"PUT"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/budgets/{budgetId}"})}),(0,i.jsx)(n.td,{children:"Update budget"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"DELETE"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/budgets/{budgetId}"})}),(0,i.jsx)(n.td,{children:"Soft delete budget"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"GET"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/budgets/user/{userId}/summary"})}),(0,i.jsx)(n.td,{children:"Budget vs expense summary"}),(0,i.jsx)(n.td,{children:"\u2705"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"-kafka-consumer",children:"\ud83d\udfe3 Kafka Consumer"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Topic:"})," ",(0,i.jsx)(n.code,{children:"expense.created"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"On new expense, match against budgets and update status/alert"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Topic:"})," ",(0,i.jsx)(n.code,{children:"account.updated"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Detect closed/inactive accounts to freeze associated budgets"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-graphql-optional",children:"\ud83e\udde9 GraphQL (Optional)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Aggregated insights endpoint via ",(0,i.jsx)(n.strong,{children:"GraphQL Gateway"})," or ",(0,i.jsx)(n.strong,{children:"own resolver"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Budget utilization"}),"\n",(0,i.jsx)(n.li,{children:"Category-wise budget trends"}),"\n",(0,i.jsx)(n.li,{children:"Budget suggestions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-4-database-schema-postgresql",children:"\ud83e\uddf1 4. Database Schema (PostgreSQL)"}),"\n",(0,i.jsxs)(n.h3,{id:"table-budgets",children:["Table: ",(0,i.jsx)(n.code,{children:"budgets"})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Column"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"budget_id"})}),(0,i.jsx)(n.td,{children:"UUID (PK)"}),(0,i.jsx)(n.td,{children:"Unique ID for the budget"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"User owning the budget"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"account_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"Target account (nullable)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"category"})}),(0,i.jsx)(n.td,{children:"VARCHAR"}),(0,i.jsx)(n.td,{children:"Category of expense (e.g., Grocery)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tag"})}),(0,i.jsx)(n.td,{children:"VARCHAR"}),(0,i.jsx)(n.td,{children:"Optional tag filter (e.g., Work)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"amount_limit"})}),(0,i.jsx)(n.td,{children:"DECIMAL"}),(0,i.jsx)(n.td,{children:"Budget limit"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"start_date"})}),(0,i.jsx)(n.td,{children:"TIMESTAMP"}),(0,i.jsx)(n.td,{children:"Start of budget period"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"end_date"})}),(0,i.jsx)(n.td,{children:"TIMESTAMP"}),(0,i.jsx)(n.td,{children:"End of budget period"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"status"})}),(0,i.jsx)(n.td,{children:"VARCHAR"}),(0,i.jsx)(n.td,{children:"ACTIVE / EXCEEDED / EXPIRED"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"created_at"})}),(0,i.jsx)(n.td,{children:"TIMESTAMP"}),(0,i.jsx)(n.td,{children:"Record creation time"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"updated_at"})}),(0,i.jsx)(n.td,{children:"TIMESTAMP"}),(0,i.jsx)(n.td,{children:"Record update time"})]})]})]}),"\n",(0,i.jsxs)(n.h3,{id:"table-budget_events-optional",children:["Table: ",(0,i.jsx)(n.code,{children:"budget_events"})," (Optional)"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Column"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"event_id"})}),(0,i.jsx)(n.td,{children:"UUID (PK)"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"budget_id"})}),(0,i.jsx)(n.td,{children:"UUID (FK)"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"event_type"})}),(0,i.jsx)(n.td,{children:"VARCHAR"}),(0,i.jsx)(n.td,{children:"e.g., LIMIT_EXCEEDED"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"event_time"})}),(0,i.jsx)(n.td,{children:"TIMESTAMP"}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-5-interactions-with-other-services",children:"\ud83d\udd04 5. Interactions with Other Services"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Service"}),(0,i.jsx)(n.th,{children:"Interaction"}),(0,i.jsx)(n.th,{children:"Mode"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Expenses"})}),(0,i.jsxs)(n.td,{children:["Consumes ",(0,i.jsx)(n.code,{children:"expense.created"})," events"]}),(0,i.jsx)(n.td,{children:"Kafka"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Accounts"})}),(0,i.jsxs)(n.td,{children:["Consumes ",(0,i.jsx)(n.code,{children:"account.updated"})]}),(0,i.jsx)(n.td,{children:"Kafka"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Metadata"})}),(0,i.jsx)(n.td,{children:"Retrieves categories and tags"}),(0,i.jsx)(n.td,{children:"REST"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"User"})}),(0,i.jsx)(n.td,{children:"For user validation (future)"}),(0,i.jsx)(n.td,{children:"REST"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Notifications"})}),(0,i.jsx)(n.td,{children:"Publishes alerts (e.g., over-budget)"}),(0,i.jsx)(n.td,{children:"Kafka"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Dashboard"})}),(0,i.jsx)(n.td,{children:"Exposes summaries"}),(0,i.jsx)(n.td,{children:"GraphQL"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-6-tech-stack",children:"\ud83e\uddf0 6. Tech Stack"}),"\n",(0,i.jsx)(n.h3,{id:"-language--framework",children:"\u2705 Language & Framework"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:".NET 8"})," (LTS) + ",(0,i.jsx)(n.strong,{children:"C# 12"})]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"ASP.NET Core Web API"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Entity Framework Core"})," (PostgreSQL provider)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"MassTransit or Confluent.Kafka"})," (Kafka client)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AutoMapper"}),", ",(0,i.jsx)(n.strong,{children:"FluentValidation"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-infra--devops",children:"\u2705 Infra & DevOps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Docker"})," (Multi-stage builds)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kubernetes"})," (Helm charts for deployment)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Spring Cloud Config / Consul"})," (External config)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"HashiCorp Vault"})," (Secrets)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Redis"})," (Cache frequently accessed budget summaries)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"PostgreSQL"})," (Primary DB)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-observability",children:"\u2705 Observability"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Serilog"})," (Structured logging)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Prometheus + Grafana"})," (Monitoring dashboards)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OpenTelemetry + Jaeger"})," (Distributed tracing)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-code-quality",children:"\u2705 Code Quality"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SonarQube"})," (Code smells, coverage)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Checkstyle / .editorconfig"})," (Linting and formatting)"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-7-architecture",children:"\ud83e\uddf1 7. Architecture"}),"\n",(0,i.jsxs)(n.h3,{id:"recommended-hexagonal-architecture-ports--adapters",children:["Recommended: ",(0,i.jsx)(n.strong,{children:"Hexagonal Architecture (Ports & Adapters)"})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Layer"}),(0,i.jsx)(n.th,{children:"Content"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Domain"})}),(0,i.jsx)(n.td,{children:"Budget entities, rules, status transitions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Application"})}),(0,i.jsx)(n.td,{children:"Services, use-cases, business logic orchestrations"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Ports"})}),(0,i.jsx)(n.td,{children:"Repositories, external interfaces, events"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Adapters"})}),(0,i.jsx)(n.td,{children:"Controllers (REST), Kafka Consumers, DB Repositories"})]})]})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Can also optionally evolve into ",(0,i.jsx)(n.strong,{children:"Onion Architecture"})," with DDD if complexity increases."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-8-security",children:"\ud83d\udd10 8. Security"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 All endpoints protected with ",(0,i.jsx)(n.strong,{children:"JWT Authentication"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Role-based checks (e.g., ",(0,i.jsx)(n.code,{children:"userId"})," match to token subject)"]}),"\n",(0,i.jsx)(n.li,{children:"\u2705 HTTPS via reverse proxy (e.g., NGINX + cert-manager)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Vault integration for credentials & DB secrets"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-9-testing-strategy",children:"\ud83e\uddea 9. Testing Strategy"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Tools & Libraries"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Unit Tests"})}),(0,i.jsx)(n.td,{children:"xUnit, Moq, FluentAssertions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Integration"})}),(0,i.jsx)(n.td,{children:"TestContainers + PostgreSQL Docker"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Kafka Test"})}),(0,i.jsx)(n.td,{children:"Embedded Kafka (Confluent/RedPanda)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Contract Test"})}),(0,i.jsx)(n.td,{children:"Pact.NET (optional for API contracts)"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-10-best-practices-enterprise-net-microservices",children:"\ud83d\udc8e 10. Best Practices (Enterprise .NET Microservices)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Feature Flags"})," (e.g., LaunchDarkly, Unleash)"]}),"\n",(0,i.jsxs)(n.li,{children:["Follow ",(0,i.jsx)(n.strong,{children:"12-Factor App"})," principles"]}),"\n",(0,i.jsxs)(n.li,{children:["Enforce ",(0,i.jsx)(n.strong,{children:"immutability"})," for critical fields"]}),"\n",(0,i.jsxs)(n.li,{children:["API versioning (e.g., ",(0,i.jsx)(n.code,{children:"/v1/budgets"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"Resilience4Net"})," or ",(0,i.jsx)(n.strong,{children:"Polly"})," for retry/circuit-breaker"]}),"\n",(0,i.jsxs)(n.li,{children:["Centralized ",(0,i.jsx)(n.strong,{children:"logging with correlation IDs"})]}),"\n",(0,i.jsx)(n.li,{children:"Automated builds (GitHub Actions / Azure DevOps)"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Would you like:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Auto-generated OpenAPI (Swagger) YAML?"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 A GitHub-ready starter template for this microservice?"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Dockerfile and Kubernetes manifests?"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Let me know!"}),"\n",(0,i.jsxs)(n.p,{children:["Great! Let's go step by step. Here's the full ",(0,i.jsx)(n.strong,{children:"starter setup for the Budgets Microservice"})," including:"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"-1-auto-generated-openapi-swagger-yaml",children:["\u2705 1. Auto-Generated ",(0,i.jsx)(n.strong,{children:"OpenAPI (Swagger) YAML"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"openapi: 3.0.1\r\ninfo:\r\n  title: Budgets Microservice API\r\n  description: REST API for managing user budgets in a personal finance system.\r\n  version: \"1.0.0\"\r\nservers:\r\n  - url: https://api.yourdomain.com/v1/budgets\r\npaths:\r\n  /budgets:\r\n    post:\r\n      summary: Create a new budget\r\n      requestBody:\r\n        required: true\r\n        content:\r\n          application/json:\r\n            schema:\r\n              $ref: '#/components/schemas/BudgetCreateRequest'\r\n      responses:\r\n        '201':\r\n          description: Budget created\r\n        '400':\r\n          $ref: '#/components/responses/BadRequest'\r\n      security:\r\n        - bearerAuth: []\r\n  /budgets/user/{userId}:\r\n    get:\r\n      summary: Get all budgets for a user\r\n      parameters:\r\n        - in: path\r\n          name: userId\r\n          schema:\r\n            type: string\r\n          required: true\r\n        - in: query\r\n          name: page\r\n          schema:\r\n            type: integer\r\n        - in: query\r\n          name: size\r\n          schema:\r\n            type: integer\r\n      responses:\r\n        '200':\r\n          description: List of budgets\r\n      security:\r\n        - bearerAuth: []\r\n  /budgets/{budgetId}:\r\n    get:\r\n      summary: Get budget by ID\r\n      parameters:\r\n        - in: path\r\n          name: budgetId\r\n          required: true\r\n          schema:\r\n            type: string\r\n      responses:\r\n        '200':\r\n          description: Budget found\r\n        '404':\r\n          description: Not found\r\n      security:\r\n        - bearerAuth: []\r\n    put:\r\n      summary: Update a budget\r\n      parameters:\r\n        - in: path\r\n          name: budgetId\r\n          required: true\r\n          schema:\r\n            type: string\r\n      requestBody:\r\n        required: true\r\n        content:\r\n          application/json:\r\n            schema:\r\n              $ref: '#/components/schemas/BudgetUpdateRequest'\r\n      responses:\r\n        '200':\r\n          description: Updated\r\n      security:\r\n        - bearerAuth: []\r\n    delete:\r\n      summary: Soft delete a budget\r\n      parameters:\r\n        - in: path\r\n          name: budgetId\r\n          required: true\r\n          schema:\r\n            type: string\r\n      responses:\r\n        '204':\r\n          description: Deleted\r\n      security:\r\n        - bearerAuth: []\r\n\r\ncomponents:\r\n  schemas:\r\n    BudgetCreateRequest:\r\n      type: object\r\n      required: [userId, category, amountLimit, startDate, endDate]\r\n      properties:\r\n        userId:\r\n          type: string\r\n        accountId:\r\n          type: string\r\n        category:\r\n          type: string\r\n        tag:\r\n          type: string\r\n        amountLimit:\r\n          type: number\r\n        startDate:\r\n          type: string\r\n          format: date-time\r\n        endDate:\r\n          type: string\r\n          format: date-time\r\n\r\n    BudgetUpdateRequest:\r\n      allOf:\r\n        - $ref: '#/components/schemas/BudgetCreateRequest'\r\n\r\n  responses:\r\n    BadRequest:\r\n      description: Invalid request\r\n      content:\r\n        application/json:\r\n          schema:\r\n            type: object\r\n            properties:\r\n              error:\r\n                type: string\r\n\r\n  securitySchemes:\r\n    bearerAuth:\r\n      type: http\r\n      scheme: bearer\r\n      bearerFormat: JWT\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-2-github-ready-starter-template-structure",children:"\u2705 2. GitHub-Ready Starter Template Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"budgets-service/\r\n\u2502\r\n\u251c\u2500\u2500 src/\r\n\u2502   \u251c\u2500\u2500 Budgets.API/             --\x3e ASP.NET Core REST Controllers\r\n\u2502   \u251c\u2500\u2500 Budgets.Application/     --\x3e Services, DTOs, Validators\r\n\u2502   \u251c\u2500\u2500 Budgets.Domain/          --\x3e Entities, ValueObjects, Interfaces\r\n\u2502   \u251c\u2500\u2500 Budgets.Infrastructure/  --\x3e Repositories, Kafka Consumers, DB Context\r\n\u2502   \u251c\u2500\u2500 Budgets.Tests/           --\x3e Unit Tests (xUnit, Moq)\r\n\u2502\r\n\u251c\u2500\u2500 docker/\r\n\u2502   \u2514\u2500\u2500 budgets.Dockerfile\r\n\u2502   \u2514\u2500\u2500 budgets.k8s.yaml\r\n\u2502\r\n\u251c\u2500\u2500 .editorconfig\r\n\u251c\u2500\u2500 docker-compose.yml\r\n\u251c\u2500\u2500 README.md\r\n\u251c\u2500\u2500 budgets.sln\r\n\u2514\u2500\u2500 .github/\r\n    \u2514\u2500\u2500 workflows/\r\n        \u2514\u2500\u2500 ci.yml              --\x3e CI/CD GitHub Actions Pipeline\n"})}),"\n",(0,i.jsx)(n.p,{children:"Let me know if you want this zipped or pushed to a GitHub repo scaffold."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"-3-dockerfile-and-kubernetes-manifests",children:["\u2705 3. ",(0,i.jsx)(n.code,{children:"Dockerfile"})," and ",(0,i.jsx)(n.code,{children:"Kubernetes Manifests"})]}),"\n",(0,i.jsxs)(n.h3,{id:"-dockerfile",children:["\ud83d\udce6 ",(0,i.jsx)(n.code,{children:"Dockerfile"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:'# Stage 1 - build\r\nFROM mcr.microsoft.com/dotnet/sdk:8.0 AS build\r\nWORKDIR /app\r\nCOPY . .\r\nRUN dotnet restore\r\nRUN dotnet publish -c Release -o out\r\n\r\n# Stage 2 - runtime\r\nFROM mcr.microsoft.com/dotnet/aspnet:8.0\r\nWORKDIR /app\r\nCOPY --from=build /app/out ./\r\nENTRYPOINT ["dotnet", "Budgets.API.dll"]\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"\ufe0f-budgetsk8syaml",children:["\u2699\ufe0f ",(0,i.jsx)(n.code,{children:"budgets.k8s.yaml"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: budgets-service\r\nspec:\r\n  replicas: 2\r\n  selector:\r\n    matchLabels:\r\n      app: budgets\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: budgets\r\n    spec:\r\n      containers:\r\n        - name: budgets\r\n          image: your-registry/budgets-service:latest\r\n          ports:\r\n            - containerPort: 80\r\n          envFrom:\r\n            - configMapRef:\r\n                name: budgets-config\r\n            - secretRef:\r\n                name: budgets-secrets\r\n---\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: budgets-service\r\nspec:\r\n  selector:\r\n    app: budgets\r\n  ports:\r\n    - protocol: TCP\r\n      port: 80\r\n      targetPort: 80\r\n  type: ClusterIP\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Would you like me to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Generate this entire folder as a ",(0,i.jsx)(n.strong,{children:".zip"}),"?"]}),"\n",(0,i.jsxs)(n.li,{children:["Create a ",(0,i.jsx)(n.strong,{children:"CI/CD GitHub Actions pipeline"}),"?"]}),"\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.strong,{children:"Redis"}),", ",(0,i.jsx)(n.strong,{children:"Kafka consumer"}),", or ",(0,i.jsx)(n.strong,{children:"testcontainers"}),"?"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Let me know how you want to proceed!"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>d});var s=r(6540);const i={},t=s.createContext(i);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);